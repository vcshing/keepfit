<!DOCTYPE html>
<html>

<head>
    <!--
        Customize this policy to fit your own app's needs. For more guidance, see:
            https://github.com/apache/cordova-plugin-whitelist/blob/master/README.md#content-security-policy
        Some notes:
            * gap: is required only on iOS (when using UIWebView) and is needed for JS->native communication
            * https://ssl.gstatic.com is required only on Android and is needed for TalkBack to function properly
            * Disables use of inline scripts in order to mitigate risk of XSS vulnerabilities. To change this:
                * Enable inline JS: add 'unsafe-inline' to default-src
        -->
    <!-- <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: https://ssl.gstatic.com 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *">-->

    <!-- Required meta tags-->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">

    <!-- Your app title -->
    <title>TABATA</title>

    <!-- This template defaults to the iOS CSS theme. To support both iOS and material design themes, see the Framework7 Tutorial at the link below:
        http://www.idangero.us/framework7/tutorials/maintain-both-ios-and-material-themes-in-single-app.html
     -->

    <link rel="stylesheet" href="lib/framework7/css/framework7.ios.min.css">
    <link rel="stylesheet" href="lib/framework7/css/framework7.ios.colors.min.css">
    <link rel="stylesheet" href="lib/framework7/css/framework7-icons.css">

    <link rel="stylesheet" href="css/styles.css">

    <script type="text/javascript" src="js/jquery.js"></script>
  <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/moment.js"></script>
    <script type="text/javascript" src="js/function.js"></script>
    <script type="text/javascript" src="js/local_storage_manager.js"></script>
    <script language="javascript" src="js/GB2312TOBIG5.js"></script>
    <script language="javascript" src="js/GBCodeUnicode.js"></script>
    <script language="javascript" src="js/GB2312TOBIGGB.js"></script>
    <script language="javascript" src="js/BIG5TOGB2312.js"></script>
    <script language="javascript" src="js/BIGCodeUnicode.js"></script>
    <script language="javascript" src="js/BIG5TOGBBIG.js"></script>
    <style></style>
</head>

<body>
    <!-- Status bar overlay for full screen mode (PhoneGap) -->
    <div class="statusbar-overlay"></div>

    <!-- Panels overlay-->
    <div class="panel-overlay"></div>
    <!-- Left panel with reveal effect-->
    <div class="panel panel-left panel-reveal">
        <div class="content-block otherApp">
            <p class="word wordOtherApps"> </p>
        </div>
        <div class="content-block shareApp">
            <p> </p>
        </div>
    </div>

    <!-- Views -->
    <div class="views">
        <!-- Your main view, should have "view-main" class -->
        <div class="view view-main">
            <!-- Top Navbar-->
            <div class="navbar">
                <div class="navbar-inner">
                    <!-- We need cool sliding animation on title element, so we have additional "sliding" class -->
                    <div class="center sliding app_title word wordCheckoutDollorCount"> </div>

                    <div class="right">

                        <!--
                          Right link contains only icon - additional "icon-only" class
                          Additional "open-panel" class tells app to open panel when we click on this link
                        -->
                        <a href="#" class="link icon-only open-panel">
                            <i class="icon icon-bars"></i>
                        </a>
                    </div>
                </div>
            </div>
            <!-- Pages container, because we use fixed-through navbar and toolbar, it has additional appropriate classes-->
            <div class="pages navbar-through toolbar-through">
                <!-- Page, "data-page" contains page name -->
                <div data-page="index" class="page">
                    <!-- Scrollable page content -->

                    <div class="page-content">
                        <p class="buttons-row">
                            <a href="#" class="button langtc">繁中</a>
                            <a href="#" class="button langDefault word"> </a>
                            <a href="#" class="button langen">English</a>
                        </p>
                        <a href="intro.html" class="button introBtn word"> </a>
                        <div class="sportContentContain">

                        </div>



                    </div>

                </div>
            </div>
            <!-- Bottom Toolbar-->
            <!--<div class="toolbar">
                <div class="toolbar-inner">

                    <a href="#" class="link">Link 1</a>
                    <a href="#" class="link">Link 2</a>
                </div>
            </div>
			-->
        </div>

    </div>
    <div style="display:none" class="hiddenDiv">
        <a href="tutorials.html" class="startTutorialsURL"></a>
    </div>
    <script>
        var IntervalVibrate = "";
    </script>
    <script type="text/javascript" src="lib/framework7/js/framework7.js"></script>
    <script type="text/javascript" src="js/customjs/function.js"></script>
    <script type="text/javascript" src="js/customjs/my-app.js"></script>
    <script type="text/javascript" src="js/customjs/bindEventShareFunction.js"></script>
    <script type="text/javascript" src="js/customjs/initScript.js"></script>

    <script type="text/javascript" src="cordova.js"></script>


    <script>
        var lang
        var defaultLangArr = []
        var loopLangArr = []
        var sportContentLangArr = []

        defaultLangArr.push("其他應用");
        defaultLangArr.push("簡易7分鐘TABATA");
        defaultLangArr.push("預設語言");
        defaultLangArr.push("介紹");


        loopLangArr.push("今天數量");
        loopLangArr.push("開始");
        loopLangArr.push("總數量");

        sportContentLangArr.push("1.開合跳 30秒");
        sportContentLangArr.push("2.太空椅 30秒");
        sportContentLangArr.push("3.伏地挺身 30秒(20-25下)");
        sportContentLangArr.push("4.平地捲腹 30秒(25-30下)");
        sportContentLangArr.push("5.高低差腳部肌肉訓練 30秒");
        sportContentLangArr.push("6.深蹲 30秒(12-15下)");
        sportContentLangArr.push("7.雙臂屈伸(俗稱:三頭肌撐體)(盡量把身體重量放在手臂肌肉上) 30秒");
        sportContentLangArr.push("8.撐體 30秒");
        sportContentLangArr.push("9.原地踏步 30秒");
        sportContentLangArr.push("10.漸進式訓練跨步 30秒");
        sportContentLangArr.push("11.伏地挺身+轉體 30秒");
        sportContentLangArr.push("12.側撐體 30秒");


        $(function() {
            lang = getCookie("lang", "selectedLang", checkLang());
            //lang = ""
            pageInit();

        })

        function pageInit() {
            setLang();

            frontEndTranslateToSelectedLang(sportContentLangArr, function(translatedLangArr) {

                var sportContentContainHtml = "";
                $.each(translatedLangArr, function(index, content) {

                    var todayAmt = getCookie("todayAmt" + moment().format('YYYYMMDD'), index, "0");
                    var overAllAmt = getCookie("overAllAmt", index, "0");


                    var todayAmtToWord = sec2str(todayAmt);
                    var overAllAmtToWord = sec2str(overAllAmt);

                    sportContentContainHtml += '                            <div class="card">';
                    sportContentContainHtml += '                                <div class="card-header">';
                    sportContentContainHtml += '';
                    sportContentContainHtml += content;
                    sportContentContainHtml += '';
                    sportContentContainHtml += '                                </div>';
                    sportContentContainHtml += '                                <div class="card-content"><img src="image/' + index + '.GIF" width="100%"></div>';
                    sportContentContainHtml += '                                <div class="card-footer no-border">';
                    sportContentContainHtml += '                                    <a><span class="loopword0"> </span> : <span class="todayAmt' + index + '" data-sec="' + todayAmt + '">' + todayAmtToWord + '</span></a>';
                    sportContentContainHtml += '                                    <a href="#" class="sportContentImage' + index + ' loopword1"> </a>';
                    sportContentContainHtml += '                                    <a><span class="loopword2"> </span> : <span class="overAllAmt' + index + '" data-sec="' + overAllAmt + '">' + overAllAmtToWord + '</span></a>';
                    sportContentContainHtml += '                                </div>';
                    sportContentContainHtml += '                            </div>';


                })

                $(".sportContentContain").html(sportContentContainHtml);

                $.each(translatedLangArr, function(index, content) {
                    $(".sportContentImage" + index).bind("click", function() {
                        var todayAmt = parseInt($(".todayAmt" + index).attr("data-sec"));
                        if (todayAmt < 0) {
                            todayAmt = 0;
                        }
                        var overAllAmt = parseInt($(".overAllAmt" + index).attr("data-sec"));
                        if (overAllAmt < 0) {
                            overAllAmt = 0;
                        }

                        var modal = myApp.modal({
                            title: ' ',
                            text: ' ',
                            afterText: '<div class="swiper-container" style="width: auto; margin:5px -15px -15px">' +
                                '<div class="swiper-pagination"></div>' +
                                '<div class="swiper-wrapper">' +
                                '<div class="swiper-slide"><center><img src="image/' + index + '.GIF" height="150" style="display:block"></center></div>' +
                                '</div>' +
                                '</div>',
                            buttons: [{
                                text: 'End',
                                class: 'tewts',
                                bold: true,
                                onClick: function(e) {
                                    clearInterval(popupSetInterval);

                                    if(getCookie("todayAmt"+ moment().format('YYYYMMDD'), "" , "")==""){
                                        setCookieIndex("sportDay", "", moment().format('YYYYMMDD') );
                                    }

                                    setCookieIndex("todayAmt"+ moment().format('YYYYMMDD'), index, todayAmt + (ConfigIntervalTime - IntervalTime));
                                    setCookieIndex("overAllAmt", index, overAllAmt + (ConfigIntervalTime - IntervalTime));
                                    pageInit();
                                }
                            }]
                        })
                        var IntervalTime = 30;
                        var ConfigIntervalTime = 30;
                        var IntervalTitleTime = 3;
                        var popupSetInterval = setInterval(function() {
                            if (IntervalTitleTime > 0) {
                                $(".modal-title").html("Ready " + IntervalTitleTime);
                                IntervalTitleTime--;
                            } else {
                                if (IntervalTime == 0) {
                                    clearInterval(popupSetInterval);
                                    myApp.closeModal();
                                    if(getCookie("todayAmt"+ moment().format('YYYYMMDD'), "" , "")==""){
                                        setCookieIndex("sportDay", "", moment().format('YYYYMMDD') );
                                    }
                                    setCookieIndex("todayAmt"+ moment().format('YYYYMMDD'), index, todayAmt + (ConfigIntervalTime - IntervalTime));
                                    setCookieIndex("overAllAmt", index, overAllAmt + (ConfigIntervalTime - IntervalTime));
                                    pageInit();
                                } else {
                                    $(".modal-title").html("GO!");
                                    $(".modal-text").html(IntervalTime);
                                }
                                IntervalTime--;
                            }
                        }, 1000);

                    })

                    frontEndTranslateToSelectedLang(defaultLangArr, function(translatedLangArr) {
                        assignWordClassTranslation(translatedLangArr,"word");
                    });

                    frontEndTranslateToSelectedLang(loopLangArr, function(translatedLangArr) {
                        assignLoopWordClassTranslation(translatedLangArr);
                    });
                })


            });


        }
    </script>
</body>

</html>
